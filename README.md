# devslot

```
devslot - Development environment manager for multi-repo worktrees

USAGE:
  devslot <command> [options]

COMMANDS:
  boilerplate <dir>      Generate initial project structure in the specified directory
  init [--allow-delete]  Sync bare repositories defined in devslot.yaml into repos/
  create <slot>          Create a new slot (multi-repo worktree environment)
  destroy <slot>         Remove the specified slot (runs pre-destroy hook first)
  reload <slot>          Ensure all worktrees exist for the slot and run post-reload hook
  list                   List all existing slots
  doctor                 Check consistency of project structure and repositories
  version                Show devslot version

FLAGS:
  -h, --help             Show this help message
  -v, --version          Show version (alias for `version`)

NOTES:
  - All operations are scoped to the devslot project root directory
    (detected by presence of devslot.yaml).

  - To prevent concurrent modifications, all operations acquire an exclusive lock
    on .devslot.lock in the project root directory.

  - Standard directory structure after `boilerplate`:
      <target-dir>/
      ├── devslot.yaml        # Project definition (version, repositories)
      ├── .gitignore          # Excludes repos/ and slots/
      ├── hooks/              # Required lifecycle hook scripts (see below)
      ├── repos/              # Bare repositories cloned by `init`
      └── slots/              # Per-slot worktrees created by `create`

    The <dir> argument is required for `boilerplate`.
    Use `.` to initialize the current directory. If the directory does not exist,
    it will be created. All standard files and directories will be generated.

  - Lifecycle hook scripts (required; generated by `boilerplate`):
      hooks/post-create      → Runs after `create <slot>`
      hooks/pre-destroy      → Runs before `destroy <slot>`
      hooks/post-reload      → Runs after `reload <slot>`

    These scripts must exist. If no action is needed, leave the file empty but executable.

  - Each hook receives the following environment variables:
      DEVSLOT_ROOT           # Path to devslot project root
      DEVSLOT_SLOT_NAME      # Name of the target slot
      DEVSLOT_SLOT_DIR       # Path to the slot directory
      DEVSLOT_REPOS_DIR      # Path to the bare repositories

  - init behavior:
      - Clones any missing repositories listed in devslot.yaml into repos/
      - Does not affect slots or worktrees
      - Repositories no longer listed will be deleted only with `--allow-delete`

  - reload behavior:
      - Ensures all repositories are checked out as worktrees for the given slot
      - Automatically adds any missing worktrees before running post-reload

  - devslot.yaml example:
      version: 1
      repositories:
        - https://github.com/example/app1
        - https://github.com/example/app2

  - repos/ and slots/ are ignored from version control (see boilerplate .gitignore)

Project homepage and documentation: https://github.com/yammerjp/devslot
```
